"""
MongoDB persistence layer for Christopher bot.
Users, proxies, sites, subscriptions, plan requests, redeems, groups, au_gate.
"""

from BOT.db.mongo import (
    init_db,
    close_db,
    ensure_indexes,
    migrate_json_to_mongo,
    use_mongo,
)
from BOT.db.store import (
    load_users,
    save_users,
    get_user,
    update_user,
    default_plan,
    get_proxy,
    set_proxy,
    delete_proxy,
    load_proxies,
    load_unified_sites,
    save_unified_sites,
    get_user_sites,
    get_user_active_sites,
    get_primary_site,
    add_site_for_user,
    remove_site_for_user,
    clear_user_sites,
    update_site_fail_count,
    reset_site_fail_count,
    mark_site_failed,
    add_sites_batch,
    get_au_gate,
    set_au_gate,
    get_au_gate_url,
    toggle_au_gate,
    gate_display_name,
    load_plan_requests,
    save_plan_requests,
    load_redeems,
    save_redeems,
    load_allowed_groups,
    save_allowed_groups,
    deduct_credit,
    has_credits,
    deduct_credit_bulk,
)

__all__ = [
    "init_db",
    "close_db",
    "ensure_indexes",
    "migrate_json_to_mongo",
    "use_mongo",
    "load_users",
    "save_users",
    "get_user",
    "update_user",
    "default_plan",
    "get_proxy",
    "set_proxy",
    "delete_proxy",
    "load_proxies",
    "load_unified_sites",
    "save_unified_sites",
    "get_user_sites",
    "get_user_active_sites",
    "get_primary_site",
    "add_site_for_user",
    "remove_site_for_user",
    "clear_user_sites",
    "update_site_fail_count",
    "reset_site_fail_count",
    "add_sites_batch",
    "mark_site_failed",
    "get_au_gate",
    "set_au_gate",
    "get_au_gate_url",
    "toggle_au_gate",
    "gate_display_name",
    "load_plan_requests",
    "save_plan_requests",
    "load_redeems",
    "save_redeems",
    "load_allowed_groups",
    "save_allowed_groups",
    "deduct_credit",
    "has_credits",
    "deduct_credit_bulk",
]
